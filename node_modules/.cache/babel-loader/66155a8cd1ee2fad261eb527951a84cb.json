{"ast":null,"code":"import _regeneratorRuntime from\"/home/rachneet/PycharmProjects/amc_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rachneet/PycharmProjects/amc_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/rachneet/PycharmProjects/amc_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from'react';import Message from'./Message';import Progress from'./Progress';import axios from'axios';import Form from'react-bootstrap/Form';import Col from'react-bootstrap/Col';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Button from'react-bootstrap/Button';import'bootstrap/dist/css/bootstrap.css';import Title from'./Title';import schema from'./schema';import Table from'./Table';var FileUpload=function FileUpload(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState('Choose .npz File'),_useState4=_slicedToArray(_useState3,2),filename=_useState4[0],setFilename=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),uploadedFile=_useState6[0],setUploadedFile=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),uploadPercentage=_useState10[0],setUploadPercentage=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),result=_useState12[0],setResult=_useState12[1];var onChange=function onChange(e){setFile(e.target.files[0]);setFilename(e.target.files[0].name);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result,formData,res,_res$data,fileName,filePath;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();result={};formData=new FormData();formData.append('file',file);_context.prev=4;_context.next=7;return axios.post('/api/upload',formData,{headers:{'Content-Type':'multipart/form-data'},onUploadProgress:function onUploadProgress(progressEvent){setUploadPercentage(parseInt(Math.round(progressEvent.loaded*100/progressEvent.total)));// Clear percentage\nsetTimeout(function(){return setUploadPercentage(0);},10000);}});case 7:res=_context.sent;_res$data=res.data,fileName=_res$data.fileName,filePath=_res$data.filePath;setResult(res.data);console.log(res.data);setUploadedFile({fileName:fileName,filePath:filePath});setMessage('File Uploaded');_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](4);if(_context.t0.response.status===500){setMessage('There was a problem with the server');}else{setMessage(_context.t0.response.data.msg);}case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,15]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var Test=function Test(_ref2){var result=_ref2.result;return/*#__PURE__*/React.createElement(React.Fragment,null,result.map(function(res){return/*#__PURE__*/React.createElement(\"div\",{className:\"results\",key:res.Modulation},res.Modulation);}));};return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(Title,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 center\"},/*#__PURE__*/React.createElement(Form,{method:\"post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group files color\"},/*#__PURE__*/React.createElement(\"label\",{style:{color:\"white\"}},\"Upload Your File\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"form-control\",onChange:onChange}),/*#__PURE__*/React.createElement(Progress,{percentage:uploadPercentage}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success btn-block\",onClick:onSubmit},\"Upload\"),message?/*#__PURE__*/React.createElement(Message,{msg:message}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"container p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Table,{headers:Object.keys(schema),rows:result})))))))),uploadedFile?/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 m-auto\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-center\"},uploadedFile.fileName),/*#__PURE__*/React.createElement(\"img\",{style:{width:'100%'},src:uploadedFile.filePath,alt:\"\"}))):null);};export default FileUpload;","map":{"version":3,"sources":["/home/rachneet/PycharmProjects/amc_react/src/FileUpload.js"],"names":["React","Fragment","useState","Message","Progress","axios","Form","Col","Container","Row","Button","Title","schema","Table","FileUpload","file","setFile","filename","setFilename","uploadedFile","setUploadedFile","message","setMessage","uploadPercentage","setUploadPercentage","result","setResult","onChange","e","target","files","name","onSubmit","preventDefault","formData","FormData","append","post","headers","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","setTimeout","res","data","fileName","filePath","console","log","response","status","msg","Test","map","Modulation","color","Object","keys","width"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\r\nimport Message from './Message';\r\nimport Progress from './Progress';\r\nimport axios from 'axios';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Button from 'react-bootstrap/Button';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport Title from './Title'\r\nimport schema from './schema';\r\nimport Table from './Table';\r\n\r\nconst FileUpload = () => {\r\n  const [file, setFile] = useState('');\r\n  const [filename, setFilename] = useState('Choose .npz File');\r\n  const [uploadedFile, setUploadedFile] = useState({});\r\n  const [message, setMessage] = useState('');\r\n  const [uploadPercentage, setUploadPercentage] = useState(0);\r\n  const [result, setResult] = useState([]);\r\n\r\n  const onChange = e => {\r\n    setFile(e.target.files[0]);\r\n    setFilename(e.target.files[0].name);\r\n  };\r\n\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    let result = {};\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n      try {\r\n          const res = await axios.post('/api/upload', formData, {\r\n              headers: {\r\n                  'Content-Type': 'multipart/form-data'\r\n              },\r\n              onUploadProgress: progressEvent => {\r\n                  setUploadPercentage(\r\n                      parseInt(\r\n                          Math.round((progressEvent.loaded * 100) / progressEvent.total)\r\n                      )\r\n                  );\r\n\r\n                  // Clear percentage\r\n                  setTimeout(() => setUploadPercentage(0), 10000);\r\n              }\r\n          });\r\n\r\n          const {fileName, filePath} = res.data;\r\n          setResult(res.data);\r\n          console.log(res.data);\r\n\r\n          setUploadedFile({fileName, filePath});\r\n\r\n          setMessage('File Uploaded');\r\n      } catch (err) {\r\n          if (err.response.status === 500) {\r\n              setMessage('There was a problem with the server');\r\n          } else {\r\n              setMessage(err.response.data.msg);\r\n          }\r\n      }\r\n\r\n  };\r\n\r\n  const Test = ({result}) => (\r\n  <>\r\n    {result.map(res => (\r\n      <div className=\"results\" key={res.Modulation}>{res.Modulation}</div>\r\n    ))}\r\n  </>\r\n    );\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n           <div><h1><Title /></h1></div>\r\n\r\n         <div className=\"container\">\r\n         <div className=\"row\">\r\n\r\n           <div className=\"col-md-6 center\">\r\n             <Form method=\"post\">\r\n\r\n               <div className=\"form-group files color\">\r\n\r\n                 <label style={{color: \"white\"}}>\r\n                     Upload Your File\r\n                 </label>\r\n                 <input type=\"file\" className=\"form-control\"\r\n                 onChange={onChange}/>\r\n\r\n                 <Progress percentage={uploadPercentage} />\r\n\r\n                   <button type=\"button\" className=\"btn btn-success btn-block\" onClick={onSubmit}>\r\n                       Upload\r\n                   </button>\r\n\r\n                   {message ? <Message msg={message} /> : null}\r\n\r\n               </div>\r\n\r\n             </Form>\r\n\r\n    {/*            {result.map(res => (*/}\r\n    {/*  <div className=\"results\" key={res.Modulation}>{res.Modulation}</div>*/}\r\n    {/*))}*/}\r\n\r\n     {/*{ result.map((item, key) =>*/}\r\n     {/*   <li key={item.Modulation}>{item.Modulation}</li>*/}\r\n     {/* )}*/}\r\n\r\n     <div className=\"container p-2\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <Table headers={Object.keys(schema)} rows={result} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n           </div>\r\n         </div>\r\n       </div>\r\n       </Container>\r\n      {uploadedFile ? (\r\n        <div className='row mt-5'>\r\n          <div className='col-md-6 m-auto'>\r\n            <h3 className='text-center'>{uploadedFile.fileName}</h3>\r\n            <img style={{ width: '100%' }} src={uploadedFile.filePath} alt='' />\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FileUpload;"]},"metadata":{},"sourceType":"module"}