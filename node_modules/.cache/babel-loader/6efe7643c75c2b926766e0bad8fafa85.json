{"ast":null,"code":"import _regeneratorRuntime from \"/home/rachneet/PycharmProjects/amc_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/rachneet/PycharmProjects/amc_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/rachneet/PycharmProjects/amc_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/rachneet/PycharmProjects/amc_react/src/FileUpload.js\";\n\nimport React, { Fragment, useState } from 'react';\nimport Message from './Message';\nimport Progress from './Progress';\nimport axios from 'axios';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport Title from './Title';\nimport schema from './schema';\nimport Table from './Table';\nimport './App.css';\nimport { MDBDataTable } from 'mdbreact';\nimport ReactTable from 'react-table';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\n\nvar FileUpload = function FileUpload() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      file = _useState2[0],\n      setFile = _useState2[1];\n\n  var _useState3 = useState('Choose File'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filename = _useState4[0],\n      setFilename = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      uploadedFile = _useState6[0],\n      setUploadedFile = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      message = _useState8[0],\n      setMessage = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      uploadPercentage = _useState10[0],\n      setUploadPercentage = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      result = _useState12[0],\n      setResult = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isLoading = _useState14[0],\n      setIsLoading = _useState14[1];\n\n  var onChange = function onChange(e) {\n    setFile(e.target.files[0]);\n    setFilename(e.target.files[0].name);\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var result, formData, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              result = {};\n              formData = new FormData();\n              formData.append('file', file);\n              setIsLoading(true);\n              _context.prev = 5;\n              _context.next = 8;\n              return axios.post('/api/upload', formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                },\n                onUploadProgress: function onUploadProgress(progressEvent) {\n                  setUploadPercentage(parseInt(Math.round(progressEvent.loaded * 100 / progressEvent.total)));\n                  console.log({\n                    uploadPercentage: uploadPercentage\n                  });\n\n                  if (setUploadPercentage === 100) {\n                    setIsLoading(false);\n                  } // Clear percentage\n\n\n                  setTimeout(function () {\n                    return setUploadPercentage(0);\n                  }, 10000);\n                }\n              });\n\n            case 8:\n              res = _context.sent;\n              // const {fileName, filePath} = res.data;\n              setResult(res.data);\n              console.log(res.data); // setUploadedFile({fileName, filePath});\n\n              setMessage('File Uploaded');\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](5);\n\n              if (_context.t0.response.status === 500) {\n                setMessage('There was a problem with the server');\n              } else {\n                setMessage(_context.t0.response.data.msg);\n              }\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 14]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onDownload = function onDownload(e) {\n    e.preventDefault();\n    var json = JSON.stringify(result);\n    var blob = new Blob([json], {\n      type: \"application/json\"\n    });\n    var url = URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    a.href = url;\n    a.download = 'results.json';\n    a.click();\n  }; // const Test = ({result}) => (\n  // <>\n  //   {result.map(res => (\n  //     <div className=\"results\" key={res.Modulation}>{res.Modulation}</div>\n  //   ))}\n  // </>\n  //   );\n\n\n  var columns = [{\n    dataField: 'Modulation',\n    text: 'Modulation'\n  }];\n  var options = {\n    page: 2,\n    sizePerPageList: [{\n      text: '5',\n      value: 5\n    }, {\n      text: '10',\n      value: 10\n    }, {\n      text: 'All',\n      value: result.length\n    }],\n    sizePerPage: 5,\n    pageStartIndex: 0,\n    paginationSize: 3,\n    prePage: 'Prev',\n    nextPage: 'Next',\n    firstPage: 'First',\n    lastPage: 'Last'\n  };\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    method: \"post\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"row-elements\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    style: {\n      paddingRight: '50px',\n      paddingTop: '-30px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group files color\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"upload-label\",\n    style: {\n      color: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 18\n    }\n  }, \"Upload Your .npz File\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"form-control\",\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(Progress, {\n    percentage: uploadPercentage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-success btn-block\",\n    disabled: isLoading,\n    onClick: !isLoading ? onSubmit : null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 20\n    }\n  }, isLoading ? 'Uploading' : 'Upload'), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-success btn-block\",\n    onClick: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 20\n    }\n  }, \"Predict Modulation\"), message ? /*#__PURE__*/React.createElement(Message, {\n    msg: message,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 31\n    }\n  }) : null)), /*#__PURE__*/React.createElement(Col, {\n    style: {\n      paddingLeft: '50px',\n      paddingTop: '0px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-div\",\n    style: {\n      marginTop: 0,\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(BootstrapTable, {\n    headerStyle: {\n      backgroundColor: 'white'\n    },\n    rowStyle: {\n      color: 'white'\n    },\n    striped: true,\n    hover: true,\n    keyField: \"id\",\n    data: result,\n    columns: columns,\n    pagination: paginationFactory(options),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      color: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 26\n    }\n  }, \"Download results: \"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: onDownload,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, \"Download\")))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 16\n    }\n  }))))));\n};\n\nexport default FileUpload;","map":{"version":3,"sources":["/home/rachneet/PycharmProjects/amc_react/src/FileUpload.js"],"names":["React","Fragment","useState","Message","Progress","axios","Form","Col","Container","Row","Button","Title","schema","Table","MDBDataTable","ReactTable","BootstrapTable","paginationFactory","FileUpload","file","setFile","filename","setFilename","uploadedFile","setUploadedFile","message","setMessage","uploadPercentage","setUploadPercentage","result","setResult","isLoading","setIsLoading","onChange","e","target","files","name","onSubmit","preventDefault","formData","FormData","append","post","headers","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","console","log","setTimeout","res","data","response","status","msg","onDownload","json","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","columns","dataField","text","options","page","sizePerPageList","value","length","sizePerPage","pageStartIndex","paginationSize","prePage","nextPage","firstPage","lastPage","paddingRight","paddingTop","color","paddingLeft","marginTop","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\r\nimport Message from './Message';\r\nimport Progress from './Progress';\r\nimport axios from 'axios';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Button from 'react-bootstrap/Button';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport Title from './Title'\r\nimport schema from './schema';\r\nimport Table from './Table';\r\nimport './App.css'\r\nimport { MDBDataTable } from 'mdbreact';\r\nimport ReactTable from 'react-table';\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\n\r\nconst FileUpload = () => {\r\n  const [file, setFile] = useState('');\r\n  const [filename, setFilename] = useState('Choose File');\r\n  const [uploadedFile, setUploadedFile] = useState({});\r\n  const [message, setMessage] = useState('');\r\n  const [uploadPercentage, setUploadPercentage] = useState(0);\r\n  const [result, setResult] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const onChange = e => {\r\n    setFile(e.target.files[0]);\r\n    setFilename(e.target.files[0].name);\r\n  };\r\n\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    let result = {};\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    setIsLoading(true);\r\n      try {\r\n          const res = await axios.post('/api/upload', formData, {\r\n              headers: {\r\n                  'Content-Type': 'multipart/form-data'\r\n              },\r\n              onUploadProgress: progressEvent => {\r\n                  setUploadPercentage(\r\n                      parseInt(\r\n                          Math.round((progressEvent.loaded * 100) / progressEvent.total)\r\n                      )\r\n                  );\r\n                console.log({uploadPercentage})\r\n                  if(setUploadPercentage === 100){\r\n                  setIsLoading(false);}\r\n\r\n                  // Clear percentage\r\n                  setTimeout(() => setUploadPercentage(0), 10000);\r\n              }\r\n          });\r\n\r\n          // const {fileName, filePath} = res.data;\r\n          setResult(res.data);\r\n          console.log(res.data);\r\n\r\n          // setUploadedFile({fileName, filePath});\r\n\r\n          setMessage('File Uploaded');\r\n\r\n      } catch (err) {\r\n          if (err.response.status === 500) {\r\n              setMessage('There was a problem with the server');\r\n          } else {\r\n              setMessage(err.response.data.msg);\r\n          }\r\n      }\r\n\r\n  };\r\n\r\n  const onDownload = e => {\r\n      e.preventDefault();\r\n\r\n\tvar json = JSON.stringify(result);\r\n    var blob = new Blob([json], {type: \"application/json\"});\r\n    var url  = URL.createObjectURL(blob);\r\n\tlet a = document.createElement('a');\r\n\ta.href = url;\r\n\ta.download = 'results.json';\r\n\ta.click();\r\n  };\r\n\r\n  // const Test = ({result}) => (\r\n  // <>\r\n  //   {result.map(res => (\r\n  //     <div className=\"results\" key={res.Modulation}>{res.Modulation}</div>\r\n  //   ))}\r\n  // </>\r\n  //   );\r\n\r\n    const columns= [\r\n    {\r\n        dataField: 'Modulation',\r\n        text: 'Modulation'\r\n    }];\r\n\r\n    const options = {\r\n                        page: 2,\r\n                        sizePerPageList: [ {\r\n                          text: '5', value: 5\r\n                        }, {\r\n                          text: '10', value: 10\r\n                        }, {\r\n                          text: 'All', value: result.length\r\n                        } ],\r\n                        sizePerPage: 5,\r\n                        pageStartIndex: 0,\r\n                        paginationSize: 3,\r\n                        prePage: 'Prev',\r\n                        nextPage: 'Next',\r\n                        firstPage: 'First',\r\n                        lastPage: 'Last',\r\n                      };\r\n\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n           <div><h1><Title /></h1></div>\r\n\r\n         <div className=\"container\">\r\n         <div className=\"row\">\r\n\r\n           <div className=\"col-md-6 center\">\r\n             <Form method=\"post\">\r\n\r\n                 <Row className={\"row-elements\"}>\r\n                    <Col style={{paddingRight: '50px', paddingTop:'-30px'}}>\r\n               <div className=\"form-group files color\">\r\n\r\n                 <label className={\"upload-label\"} style={{color: \"white\"}}>\r\n                     Upload Your .npz File\r\n                 </label>\r\n                 <input type=\"file\" className=\"form-control\"\r\n                 onChange={onChange}/>\r\n\r\n                 <Progress percentage={uploadPercentage} />\r\n\r\n                   <button type=\"button\" className=\"btn btn-success btn-block\"\r\n                           disabled={isLoading}\r\n                          onClick={!isLoading ? onSubmit : null}>\r\n                          { isLoading ? 'Uploading' : 'Upload' }\r\n\r\n                   </button>\r\n\r\n                   <button type=\"button\" className=\"btn btn-success btn-block\" onClick={onSubmit}>\r\n                       Predict Modulation\r\n                   </button>\r\n\r\n                   {message ? <Message msg={message} /> : null}\r\n\r\n\r\n               </div>\r\n                    </Col>\r\n\r\n                     <Col style={{paddingLeft: '50px', paddingTop: '0px'}}>\r\n\r\n                  <div  className={\"table-div\"} style={{ marginTop: 0, color: 'white'}} >\r\n                <BootstrapTable\r\n                    headerStyle= {{ backgroundColor: 'white'}}\r\n                    rowStyle={ { color: 'white' } }\r\n                    striped\r\n                    hover\r\n                    keyField='id'\r\n                    data={ result }\r\n                    columns={ columns }\r\n                    pagination={ paginationFactory(options)}\r\n                />\r\n                    </div>\r\n\r\n                         <label style={{color: \"white\"}}>\r\n                             Download results: </label>\r\n\t\t\t\t<Button variant=\"primary\" onClick={onDownload}>Download</Button>\r\n             </Col>\r\n                 </Row>\r\n\r\n             </Form>\r\n\r\n               <div id=\"container\">\r\n\r\n\r\n\r\n\t\t\t</div>\r\n\r\n\r\n           </div>\r\n         </div>\r\n       </div>\r\n       </Container>\r\n\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FileUpload;"]},"metadata":{},"sourceType":"module"}